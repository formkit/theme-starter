{
  "url": "https://docs.npmjs.com/trusted-publishers",
  "markdown": "# Trusted publishing for npm packages | npm Docs\n[Skip to search](#search-box-input)[Skip to content](#skip-to-content)\n[\nnpm Docs](https://docs.npmjs.com/)\n[npmjs.com](https://npmjs.com/)[Status](https://status.npmjs.com/)[Support](https://npmjs.com/support/)\n### Site navigation\n-   -   [About npm](https://docs.npmjs.com/about-npm)\n-   -   Getting started\n        -   Setting up your npm user account\n            -   [Creating a new user account on the public registry](https://docs.npmjs.com/creating-a-new-npm-user-account)\n            -   [Creating a strong password](https://docs.npmjs.com/creating-a-strong-password)\n            -   [Receiving a one-time password over email](https://docs.npmjs.com/receiving-a-one-time-password-over-email)\n            -   [About two-factor authentication](https://docs.npmjs.com/about-two-factor-authentication)\n            -   [Configuring two-factor authentication](https://docs.npmjs.com/configuring-two-factor-authentication)\n            -   [Accessing npm using two-factor authentication](https://docs.npmjs.com/accessing-npm-using-2fa)\n            -   [Recovering your 2FA-enabled account](https://docs.npmjs.com/recovering-your-2fa-enabled-account)\n        -   Managing your npm user account\n            -   [Managing your profile settings](https://docs.npmjs.com/managing-your-profile-settings)\n            -   [Changing your npm username](https://docs.npmjs.com/changing-your-npm-username)\n            -   [Deleting your npm user account](https://docs.npmjs.com/deleting-your-npm-user-account)\n            -   [Requesting an export of your personal data](https://docs.npmjs.com/requesting-your-data)\n        -   Paying for your npm user account\n            -   [Upgrading to a paid user account plan](https://docs.npmjs.com/upgrading-to-a-paid-user-account-plan)\n            -   [Viewing, downloading, and emailing receipts for your npm user account](https://docs.npmjs.com/viewing-downloading-and-emailing-receipts-for-your-user-account)\n            -   [Updating user account billing settings](https://docs.npmjs.com/updating-user-account-billing-settings)\n            -   [Downgrading to a free user account plan](https://docs.npmjs.com/downgrading-to-a-free-user-account-plan)\n        -   Configuring your local environment\n            -   [About npm CLI versions](https://docs.npmjs.com/about-npm-versions)\n            -   [Downloading and installing Node.js and npm](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm)\n        -   Troubleshooting\n            -   [Generating and locating npm-debug.log files](https://docs.npmjs.com/generating-and-locating-npm-debug.log-files)\n            -   [Common errors](https://docs.npmjs.com/common-errors)\n            -   [Try the latest stable version of node](https://docs.npmjs.com/try-the-latest-stable-version-of-node)\n            -   [Try the latest stable version of npm](https://docs.npmjs.com/try-the-latest-stable-version-of-npm)\n-   -   Packages and modules\n        -   Introduction to packages and modules\n            -   [About the public npm registry](https://docs.npmjs.com/about-the-public-npm-registry)\n            -   [About packages and modules](https://docs.npmjs.com/about-packages-and-modules)\n            -   [About scopes](https://docs.npmjs.com/about-scopes)\n            -   [About public packages](https://docs.npmjs.com/about-public-packages)\n            -   [About private packages](https://docs.npmjs.com/about-private-packages)\n            -   [npm package scope, access level, and visibility](https://docs.npmjs.com/package-scope-access-level-and-visibility)\n        -   Contributing packages to the registry\n            -   [Creating a package.json file](https://docs.npmjs.com/creating-a-package-json-file)\n            -   [Creating Node.js modules](https://docs.npmjs.com/creating-node-js-modules)\n            -   [About package README files](https://docs.npmjs.com/about-package-readme-files)\n            -   [Creating and publishing unscoped public packages](https://docs.npmjs.com/creating-and-publishing-unscoped-public-packages)\n            -   [Creating and publishing scoped public packages](https://docs.npmjs.com/creating-and-publishing-scoped-public-packages)\n            -   [Creating and publishing private packages](https://docs.npmjs.com/creating-and-publishing-private-packages)\n            -   [Package name guidelines](https://docs.npmjs.com/package-name-guidelines)\n            -   [Specifying dependencies and devDependencies in a package.json file](https://docs.npmjs.com/specifying-dependencies-and-devdependencies-in-a-package-json-file)\n            -   [About semantic versioning](https://docs.npmjs.com/about-semantic-versioning)\n            -   [Adding dist-tags to packages](https://docs.npmjs.com/adding-dist-tags-to-packages)\n        -   Updating and managing your published packages\n            -   [Changing package visibility](https://docs.npmjs.com/changing-package-visibility)\n            -   [Adding collaborators to private packages owned by a user account](https://docs.npmjs.com/adding-collaborators-to-private-packages-owned-by-a-user-account)\n            -   [Updating your published package version number](https://docs.npmjs.com/updating-your-published-package-version-number)\n            -   [Deprecating and undeprecating packages or package versions](https://docs.npmjs.com/deprecating-and-undeprecating-packages-or-package-versions)\n            -   [Transferring a package from a user account to another user account](https://docs.npmjs.com/transferring-a-package-from-a-user-account-to-another-user-account)\n            -   [Unpublishing packages from the registry](https://docs.npmjs.com/unpublishing-packages-from-the-registry)\n        -   Getting packages from the registry\n            -   [Searching for and choosing packages to download](https://docs.npmjs.com/searching-for-and-choosing-packages-to-download)\n            -   [Downloading and installing packages locally](https://docs.npmjs.com/downloading-and-installing-packages-locally)\n            -   [Downloading and installing packages globally](https://docs.npmjs.com/downloading-and-installing-packages-globally)\n            -   [Resolving EACCES permissions errors when installing packages globally](https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally)\n            -   [Updating packages downloaded from the registry](https://docs.npmjs.com/updating-packages-downloaded-from-the-registry)\n            -   [Using npm packages in your projects](https://docs.npmjs.com/using-npm-packages-in-your-projects)\n            -   [Using deprecated packages](https://docs.npmjs.com/using-deprecated-packages)\n            -   [Uninstalling packages and dependencies](https://docs.npmjs.com/uninstalling-packages-and-dependencies)\n        -   Securing your code\n            -   [About audit reports](https://docs.npmjs.com/about-audit-reports)\n            -   [Auditing package dependencies for security vulnerabilities](https://docs.npmjs.com/auditing-package-dependencies-for-security-vulnerabilities)\n            -   [Generating provenance statements](https://docs.npmjs.com/generating-provenance-statements)\n            -   [Trusted publishing with OIDC](https://docs.npmjs.com/trusted-publishers)\n            -   [About ECDSA registry signatures](https://docs.npmjs.com/about-registry-signatures)\n            -   [Verifying ECDSA registry signatures](https://docs.npmjs.com/verifying-registry-signatures)\n            -   [Requiring 2FA for package publishing and settings modification](https://docs.npmjs.com/requiring-2fa-for-package-publishing-and-settings-modification)\n            -   [Reporting malware in an npm package](https://docs.npmjs.com/reporting-malware-in-an-npm-package)\n-   -   Integrations\n        -   Integrating npm with external services\n            -   [About access tokens](https://docs.npmjs.com/about-access-tokens)\n            -   [Creating and viewing access tokens](https://docs.npmjs.com/creating-and-viewing-access-tokens)\n            -   [Revoking access tokens](https://docs.npmjs.com/revoking-access-tokens)\n            -   [Using private packages in a CI/CD workflow](https://docs.npmjs.com/using-private-packages-in-a-ci-cd-workflow)\n            -   [Docker and private modules](https://docs.npmjs.com/docker-and-private-modules)\n-   -   Organizations\n        -   Creating and managing organizations\n            -   [Creating an organization](https://docs.npmjs.com/creating-an-organization)\n            -   [Converting your user account to an organization](https://docs.npmjs.com/converting-your-user-account-to-an-organization)\n            -   [Requiring two-factor authentication in your organization](https://docs.npmjs.com/requiring-two-factor-authentication-in-your-organization)\n            -   [Renaming an organization](https://docs.npmjs.com/renaming-an-organization)\n            -   [Deleting an organization](https://docs.npmjs.com/deleting-an-organization)\n        -   Paying for your organization\n            -   [Upgrading to a paid organization plan](https://docs.npmjs.com/upgrading-to-a-paid-organization-plan)\n            -   [Viewing, downloading, and emailing receipts for your organization](https://docs.npmjs.com/viewing-downloading-and-emailing-receipts-for-your-organization)\n            -   [Updating organization billing settings](https://docs.npmjs.com/updating-organization-billing-settings)\n            -   [Downgrading to a free organization plan](https://docs.npmjs.com/downgrading-to-a-free-organization-plan)\n        -   Managing organization members\n            -   [Adding members to your organization](https://docs.npmjs.com/adding-members-to-your-organization)\n            -   [Accepting or rejecting an organization invitation](https://docs.npmjs.com/accepting-or-rejecting-an-organization-invitation)\n            -   [Organization roles and permissions](https://docs.npmjs.com/organization-roles-and-permissions)\n            -   [Managing organization permissions](https://docs.npmjs.com/managing-organization-permissions)\n            -   [Removing members from your organization](https://docs.npmjs.com/removing-members-from-your-organization)\n        -   Managing teams\n            -   [About the developers team](https://docs.npmjs.com/about-developers-team)\n            -   [Creating teams](https://docs.npmjs.com/creating-teams)\n            -   [Adding organization members to teams](https://docs.npmjs.com/adding-organization-members-to-teams)\n            -   [Removing organization members from teams](https://docs.npmjs.com/removing-organization-members-from-teams)\n            -   [Managing team access to organization packages](https://docs.npmjs.com/managing-team-access-to-organization-packages)\n            -   [Removing teams](https://docs.npmjs.com/removing-teams)\n        -   Managing organization packages\n            -   [About organization scopes and packages](https://docs.npmjs.com/about-organization-scopes-and-packages)\n            -   [Configuring your npm client with your organization settings](https://docs.npmjs.com/configuring-your-npm-client-with-your-organization-settings)\n            -   [Creating and publishing an organization scoped package](https://docs.npmjs.com/creating-and-publishing-an-organization-scoped-package)\n-   -   Policies\n        -   [Terms of Use](https://docs.npmjs.com/policies/terms)\n        -   [Open Source Terms](https://docs.npmjs.com/policies/open-source-terms)\n        -   [Private Terms](https://docs.npmjs.com/policies/private-terms)\n        -   [Code of Conduct](https://docs.npmjs.com/policies/conduct)\n        -   [Package Name Disputes](https://docs.npmjs.com/policies/disputes)\n        -   [npm License](https://docs.npmjs.com/policies/npm-license)\n        -   [Privacy Policy](https://docs.npmjs.com/policies/privacy)\n        -   [Unpublish Policy](https://docs.npmjs.com/policies/unpublish)\n        -   [Copyright and DMCA Policy](https://docs.npmjs.com/policies/dmca)\n        -   [Logos and Usage](https://docs.npmjs.com/policies/logos-and-usage)\n        -   [Security](https://docs.npmjs.com/policies/security)\n        -   [Replication and web crawler policy](https://docs.npmjs.com/policies/crawlers)\n-   -   [Threats and mitigations](https://docs.npmjs.com/threats-and-mitigations)\n-   -   npm CLI\n        -   CLI Commands\n            -   [npm](https://docs.npmjs.com/cli/v11/commands/npm)\n            -   [npm access](https://docs.npmjs.com/cli/v11/commands/npm-access)\n            -   [npm adduser](https://docs.npmjs.com/cli/v11/commands/npm-adduser)\n            -   [npm audit](https://docs.npmjs.com/cli/v11/commands/npm-audit)\n            -   [npm bugs](https://docs.npmjs.com/cli/v11/commands/npm-bugs)\n            -   [npm cache](https://docs.npmjs.com/cli/v11/commands/npm-cache)\n            -   [npm ci](https://docs.npmjs.com/cli/v11/commands/npm-ci)\n            -   [npm completion](https://docs.npmjs.com/cli/v11/commands/npm-completion)\n            -   [npm config](https://docs.npmjs.com/cli/v11/commands/npm-config)\n            -   [npm dedupe](https://docs.npmjs.com/cli/v11/commands/npm-dedupe)\n            -   [npm deprecate](https://docs.npmjs.com/cli/v11/commands/npm-deprecate)\n            -   [npm diff](https://docs.npmjs.com/cli/v11/commands/npm-diff)\n            -   [npm dist-tag](https://docs.npmjs.com/cli/v11/commands/npm-dist-tag)\n            -   [npm docs](https://docs.npmjs.com/cli/v11/commands/npm-docs)\n            -   [npm doctor](https://docs.npmjs.com/cli/v11/commands/npm-doctor)\n            -   [npm edit](https://docs.npmjs.com/cli/v11/commands/npm-edit)\n            -   [npm exec](https://docs.npmjs.com/cli/v11/commands/npm-exec)\n            -   [npm explain](https://docs.npmjs.com/cli/v11/commands/npm-explain)\n            -   [npm explore](https://docs.npmjs.com/cli/v11/commands/npm-explore)\n            -   [npm find-dupes](https://docs.npmjs.com/cli/v11/commands/npm-find-dupes)\n            -   [npm fund](https://docs.npmjs.com/cli/v11/commands/npm-fund)\n            -   [npm help](https://docs.npmjs.com/cli/v11/commands/npm-help)\n            -   [npm help-search](https://docs.npmjs.com/cli/v11/commands/npm-help-search)\n            -   [npm init](https://docs.npmjs.com/cli/v11/commands/npm-init)\n            -   [npm install](https://docs.npmjs.com/cli/v11/commands/npm-install)\n            -   [npm install-ci-test](https://docs.npmjs.com/cli/v11/commands/npm-install-ci-test)\n            -   [npm install-test](https://docs.npmjs.com/cli/v11/commands/npm-install-test)\n            -   [npm link](https://docs.npmjs.com/cli/v11/commands/npm-link)\n            -   [npm login](https://docs.npmjs.com/cli/v11/commands/npm-login)\n            -   [npm logout](https://docs.npmjs.com/cli/v11/commands/npm-logout)\n            -   [npm ls](https://docs.npmjs.com/cli/v11/commands/npm-ls)\n            -   [npm org](https://docs.npmjs.com/cli/v11/commands/npm-org)\n            -   [npm outdated](https://docs.npmjs.com/cli/v11/commands/npm-outdated)\n            -   [npm owner](https://docs.npmjs.com/cli/v11/commands/npm-owner)\n            -   [npm pack](https://docs.npmjs.com/cli/v11/commands/npm-pack)\n            -   [npm ping](https://docs.npmjs.com/cli/v11/commands/npm-ping)\n            -   [npm pkg](https://docs.npmjs.com/cli/v11/commands/npm-pkg)\n            -   [npm prefix](https://docs.npmjs.com/cli/v11/commands/npm-prefix)\n            -   [npm profile](https://docs.npmjs.com/cli/v11/commands/npm-profile)\n            -   [npm prune](https://docs.npmjs.com/cli/v11/commands/npm-prune)\n            -   [npm publish](https://docs.npmjs.com/cli/v11/commands/npm-publish)\n            -   [npm query](https://docs.npmjs.com/cli/v11/commands/npm-query)\n            -   [npm rebuild](https://docs.npmjs.com/cli/v11/commands/npm-rebuild)\n            -   [npm repo](https://docs.npmjs.com/cli/v11/commands/npm-repo)\n            -   [npm restart](https://docs.npmjs.com/cli/v11/commands/npm-restart)\n            -   [npm root](https://docs.npmjs.com/cli/v11/commands/npm-root)\n            -   [npm run](https://docs.npmjs.com/cli/v11/commands/npm-run)\n            -   [npm sbom](https://docs.npmjs.com/cli/v11/commands/npm-sbom)\n            -   [npm search](https://docs.npmjs.com/cli/v11/commands/npm-search)\n            -   [npm shrinkwrap](https://docs.npmjs.com/cli/v11/commands/npm-shrinkwrap)\n            -   [npm star](https://docs.npmjs.com/cli/v11/commands/npm-star)\n            -   [npm stars](https://docs.npmjs.com/cli/v11/commands/npm-stars)\n            -   [npm start](https://docs.npmjs.com/cli/v11/commands/npm-start)\n            -   [npm stop](https://docs.npmjs.com/cli/v11/commands/npm-stop)\n            -   [npm team](https://docs.npmjs.com/cli/v11/commands/npm-team)\n            -   [npm test](https://docs.npmjs.com/cli/v11/commands/npm-test)\n            -   [npm token](https://docs.npmjs.com/cli/v11/commands/npm-token)\n            -   [npm undeprecate](https://docs.npmjs.com/cli/v11/commands/npm-undeprecate)\n            -   [npm uninstall](https://docs.npmjs.com/cli/v11/commands/npm-uninstall)\n            -   [npm unpublish](https://docs.npmjs.com/cli/v11/commands/npm-unpublish)\n            -   [npm unstar](https://docs.npmjs.com/cli/v11/commands/npm-unstar)\n            -   [npm update](https://docs.npmjs.com/cli/v11/commands/npm-update)\n            -   [npm version](https://docs.npmjs.com/cli/v11/commands/npm-version)\n            -   [npm view](https://docs.npmjs.com/cli/v11/commands/npm-view)\n            -   [npm whoami](https://docs.npmjs.com/cli/v11/commands/npm-whoami)\n            -   [npx](https://docs.npmjs.com/cli/v11/commands/npx)\n        -   Configuring npm\n            -   [Install](https://docs.npmjs.com/cli/v11/configuring-npm/install)\n            -   [Folders](https://docs.npmjs.com/cli/v11/configuring-npm/folders)\n            -   [.npmrc](https://docs.npmjs.com/cli/v11/configuring-npm/npmrc)\n            -   [npm-shrinkwrap.json](https://docs.npmjs.com/cli/v11/configuring-npm/npm-shrinkwrap-json)\n            -   [package.json](https://docs.npmjs.com/cli/v11/configuring-npm/package-json)\n            -   [package-lock.json](https://docs.npmjs.com/cli/v11/configuring-npm/package-lock-json)\n        -   Using npm\n            -   [Registry](https://docs.npmjs.com/cli/v11/using-npm/registry)\n            -   [Package spec](https://docs.npmjs.com/cli/v11/using-npm/package-spec)\n            -   [Config](https://docs.npmjs.com/cli/v11/using-npm/config)\n            -   [Logging](https://docs.npmjs.com/cli/v11/using-npm/logging)\n            -   [Scope](https://docs.npmjs.com/cli/v11/using-npm/scope)\n            -   [Scripts](https://docs.npmjs.com/cli/v11/using-npm/scripts)\n            -   [Workspaces](https://docs.npmjs.com/cli/v11/using-npm/workspaces)\n            -   [Organizations](https://docs.npmjs.com/cli/v11/using-npm/orgs)\n            -   [Dependency Selectors](https://docs.npmjs.com/cli/v11/using-npm/dependency-selectors)\n            -   [Developers](https://docs.npmjs.com/cli/v11/using-npm/developers)\n            -   [Removal](https://docs.npmjs.com/cli/v11/using-npm/removal)\n            -   [Changelog](https://docs.npmjs.com/cli/v11/using-npm/changelog)\n-   [npmjs.com](https://npmjs.com/)\n-   [Status](https://status.npmjs.com/)\n-   [Support](https://npmjs.com/support/)\n-   [GitHub](https://github.com/npm/documentation)\n1.  [Packages and modules](https://docs.npmjs.com/packages-and-modules)\n2.  [Securing your code](https://docs.npmjs.com/packages-and-modules/securing-your-code)\n3.  [Trusted publishing with OIDC](https://docs.npmjs.com/trusted-publishers)\n# Trusted publishing for npm packages\nSee DetailsTable of contents\n-   [How trusted publishing works](#how-trusted-publishing-works)\n-   [Supported CI/CD providers](#supported-cicd-providers)\n-   Configuring trusted publishing\n    -   Step 1: Add a trusted publisher on npmjs.com\n        -   [For GitHub Actions](#for-github-actions)\n        -   [For GitLab CI/CD](#for-gitlab-cicd)\n    -   Step 2: Configure your CI/CD workflow\n        -   [GitHub Actions configuration](#github-actions-configuration)\n        -   [GitLab CI/CD configuration](#gitlab-cicd-configuration)\n    -   [Managing trusted publisher configurations](#managing-trusted-publisher-configurations)\n-   Recommended: Restrict token access when using trusted publishers\n    -   [How to configure maximum security](#how-to-configure-maximum-security)\n    -   [Why this matters](#why-this-matters)\n    -   [Migration tip](#migration-tip)\n-   Automatic provenance generation\n    -   [Disabling provenance generation](#disabling-provenance-generation)\n-   Security best practices\n    -   [Prefer trusted publishing over tokens](#prefer-trusted-publishing-over-tokens)\n    -   [Handling private dependencies](#handling-private-dependencies)\n    -   [Additional security measures](#additional-security-measures)\n-   [Troubleshooting](#troubleshooting)\n-   [Limitations and future improvements](#limitations-and-future-improvements)\n-   [Learn more](#learn-more)\nTrusted publishing allows you to publish npm packages directly from your CI/CD workflows using [OpenID Connect (OIDC)](https://openid.net/developers/how-connect-works/) authentication, eliminating the need for long-lived npm tokens. This feature implements the [trusted publishers industry standard](https://repos.openssf.org/trusted-publishers-for-all-package-repositories) specified by the Open Source Security Foundation (OpenSSF), joining a growing ecosystem including [PyPI](https://docs.pypi.org/trusted-publishers/), [RubyGems](https://guides.rubygems.org/trusted-publishing/), and other major package registries in offering this security enhancement.\n**Note:** Trusted publishing requires [npm CLI](https://docs.npmjs.com/cli/v11) version 11.5.1 or later.\n## [How trusted publishing works](#how-trusted-publishing-works)\nTrusted publishing creates a trust relationship between npm and your CI/CD provider using OIDC. When you configure a trusted publisher for your package, npm will accept publishes from the specific workflow you've authorized, in addition to traditional authentication methods like npm tokens and manual publishes. The npm CLI automatically detects OIDC environments and uses them for authentication before falling back to traditional tokens.\nThis approach eliminates the security risks associated with long-lived write tokens, which can be compromised, accidentally exposed in logs, or require manual rotation. Instead, each publish uses short-lived, cryptographically-signed tokens that are specific to your workflow and cannot be extracted or reused.\n## [Supported CI/CD providers](#supported-cicd-providers)\nTrusted publishing currently supports:\n-   [GitHub Actions](https://github.com/features/actions) (GitHub-hosted runners)\n-   [GitLab CI/CD Pipelines](https://docs.gitlab.com/ci/pipelines/) (GitLab.com shared runners)\nSelf-hosted runners are not currently supported but are planned for future releases.\n## [Configuring trusted publishing](#configuring-trusted-publishing)\n## [Step 1: Add a trusted publisher on npmjs.com](#step-1-add-a-trusted-publisher-on-npmjscom)\nNavigate to your package settings on [npmjs.com](https://www.npmjs.com) and find the \"**Trusted Publisher**\" section. Under \"**Select your publisher**\", choose your CI/CD provider by clicking either the GitHub Actions or GitLab CI/CD button.\n![Screenshot showing the Trusted Publisher section with Select your publisher label and provider buttons](https://docs.npmjs.com/packages-and-modules/securing-your-code/trusted-publisher.png)\n### [For GitHub Actions](#for-github-actions)\nConfigure the following fields:\n-   **Organization or user** (required): Your GitHub username or organization name\n-   **Repository** (required): Your repository name\n-   **Workflow filename** (required): The filename of your workflow (e.g., `publish.yml`)\n    -   Enter only the filename, not the full path\n    -   Must include the `.yml` or `.yaml` extension\n    -   The workflow file must exist in `.github/workflows/` in your repository\n-   **Environment name** (optional): If using [GitHub environments](https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment) for deployment protection\n![Screenshot of GitHub Actions trusted publisher configuration form](https://docs.npmjs.com/packages-and-modules/securing-your-code/trusted-publisher-github-actions.png)\n### [For GitLab CI/CD](#for-gitlab-cicd)\nConfigure the following fields:\n-   **Namespace** (required): Your GitLab username or group name\n-   **Project name** (required): Your project name\n-   **Top-level CI file path** (required): The path to your CI file (e.g., `.gitlab-ci.yml`)\n    -   Must include the `.yml` extension\n-   **Environment name** (optional): If using [GitLab environments](https://docs.gitlab.com/ee/ci/environments/)\n![Screenshot of GitLab CI/CD trusted publisher configuration form](https://docs.npmjs.com/packages-and-modules/securing-your-code/trusted-publisher-gitlab.png)\n**Note:** Each package can only have one trusted publisher configured at a time.\n## [Step 2: Configure your CI/CD workflow](#step-2-configure-your-cicd-workflow)\n### [GitHub Actions configuration](#github-actions-configuration)\nAdd the required OIDC permissions to your workflow. Here's a complete example:\nname: Publish Package\non:\n  push:\n    tags:\n      \\- 'v\\*'\npermissions:\n  id-token: write  \\# Required for OIDC\n  contents: read\njobs:\n  publish:\n    runs-on: ubuntu\\-latest\n    steps:\n      \\- uses: actions/checkout@v4\n      \\- uses: actions/setup\\-node@v4\n        with:\n          node-version: '20'\n          registry-url: 'https://registry.npmjs.org'\n      \\# Ensure npm 11.5.1 or later is installed\n      \\- name: Update npm\n        run: npm install \\-g npm@latest\n      \\- run: npm ci\n      \\- run: npm run build \\-\\-if\\-present\n      \\- run: npm test\n      \\- run: npm publish\nThe critical requirement is the `id-token: write` permission, which allows GitHub Actions to generate OIDC tokens. Learn more in [GitHub's OIDC documentation](https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect).\n### [GitLab CI/CD configuration](#gitlab-cicd-configuration)\nConfigure the OIDC ID token in your pipeline:\nstages:\n  \\- test\n  \\- build\n  \\- publish\nvariables:\n  NODE\\_VERSION: '20'\ntest:\n  stage: test\n  image: node:${NODE\\_VERSION}\n  script:\n    \\- npm ci\n    \\- npm test\npublish:\n  stage: publish\n  image: node:${NODE\\_VERSION}\n  id\\_tokens:\n    NPM\\_ID\\_TOKEN:\n      aud: \"npm:registry.npmjs.org\"\n    SIGSTORE\\_ID\\_TOKEN:\n      aud: sigstore\n  script:\n    \\# Ensure npm 11.5.1 or later is installed\n    \\- npm install \\-g npm@latest\n    \\- npm ci\n    \\- npm run build \\-\\-if\\-present\n    \\- npm publish\n  only:\n    \\- tags\nThe `id_tokens` configuration tells GitLab to generate an OIDC token for npm. Learn more in [GitLab's OIDC documentation](https://docs.gitlab.com/ee/ci/cloud_services/).\n## [Managing trusted publisher configurations](#managing-trusted-publisher-configurations)\nYou can modify or remove your trusted publisher configuration at any time through your package settings on [npmjs.com](https://npmjs.com). Each package can only have one trusted publisher connection at a time, but this connection can be edited or deleted as needed. To change providers (for example, switching from GitHub Actions to GitLab CI/CD), simply edit your existing configuration and select the new provider. The change takes effect immediately for future publishes. To remove trusted publishing entirely and return to token-based authentication, delete the trusted publisher configuration from your package settings.\n## [Recommended: Restrict token access when using trusted publishers](#recommended-restrict-token-access-when-using-trusted-publishers)\nOnce you've configured trusted publishers for your package, we strongly recommend restricting traditional token-based publishing access for enhanced security.\n## [How to configure maximum security](#how-to-configure-maximum-security)\n1.  After enabling trusted publishers, navigate to your package's **Settings** → **Publishing access**\n2.  Select **\"Require two-factor authentication and disallow tokens\"**\n3.  Save your changes by clicking on **Update Package Settings**\n## [Why this matters](#why-this-matters)\nTrusted publishers use short-lived, scoped credentials that are generated on-demand during your CI/CD workflow, eliminating the need for long-lived tokens. By restricting traditional token access while using trusted publishers, you reduce potential security risks associated with credential management.\n**Note:** The \"disallow tokens\" setting only affects traditional token authentication. Your trusted publishers will continue to work normally, as they use OIDC tokens.\n## [Migration tip](#migration-tip)\nIf you're transitioning from token-based publishing:\n1.  Set up trusted publishers first and verify they work\n2.  Then restrict token access as described above\n3.  [Revoke any existing automation tokens](https://docs.npmjs.com/revoking-access-tokens) that are no longer needed\nThis ensures a smooth transition without disrupting your release process.\n## [Automatic provenance generation](#automatic-provenance-generation)\nWhen you publish using trusted publishing, npm automatically generates and publishes [provenance attestations](https://docs.npmjs.com/generating-provenance-statements) for your package. This happens by default—you don't need to add the `--provenance` flag to your publish command.\n![Screenshot showing provenance badge/information on a package page](https://docs.npmjs.com/packages-and-modules/securing-your-code/trusted-publisher-provenance.png)\nProvenance provides cryptographic proof of where and how your package was built, allowing users to verify its authenticity. This automatic generation only applies when all of these conditions are met:\n-   Publishing via trusted publishing (OIDC)\n-   Publishing from a public repository\n-   Publishing a public package\n**Note:** Provenance generation is [not supported for private repositories](https://github.blog/changelog/2023-07-25-publishing-with-npm-provenance-from-private-source-repositories-is-no-longer-supported/), even when publishing public packages.\n## [Disabling provenance generation](#disabling-provenance-generation)\nWhile we strongly recommend keeping provenance enabled, you can disable it if needed. Set the `provenance` option to `false` in any of these ways:\n**Using environment variable:**\nNPM\\_CONFIG\\_PROVENANCE\\=false npm publish\n**In your `.npmrc` file:**\nprovenance=false\n**In your `package.json`:**\n{\n  \"publishConfig\": {\n    \"provenance\": false\n  }\n}\n## [Security best practices](#security-best-practices)\n## [Prefer trusted publishing over tokens](#prefer-trusted-publishing-over-tokens)\nWhen trusted publishing is available for your workflow, always prefer it over long-lived tokens. Traditional npm tokens pose several security risks:\n-   They can be accidentally exposed in CI logs or configuration files\n-   They require manual rotation and management\n-   If compromised, they provide persistent access until revoked\n-   They often have broader permissions than necessary\nTrusted publishing eliminates these risks by using short-lived, workflow-specific credentials that are automatically managed and cannot be extracted.\n## [Handling private dependencies](#handling-private-dependencies)\nWhile trusted publishing handles the publish operation, you may still need authentication for installing private npm dependencies. For this scenario, we recommend:\n\\# GitHub Actions example\n\\- uses: actions/setup\\-node@v4\n  with:\n    node-version: '20'\n    registry-url: 'https://registry.npmjs.org'\n\\# Ensure npm 11.5.1 or later for trusted publishing\n\\- run: npm install \\-g npm@latest\n\\# Use a read-only token for installing dependencies\n\\- run: npm ci\n  env:\n    NODE\\_AUTH\\_TOKEN: ${{ secrets.NPM\\_READ\\_TOKEN }}\n\\# Publish uses OIDC - no token needed\n\\- run: npm publish\nAlways use [read-only granular access tokens](https://docs.npmjs.com/creating-and-viewing-access-tokens#creating-granular-access-tokens-on-the-website) for installing dependencies. This limits potential damage if the token is ever compromised.\n## [Additional security measures](#additional-security-measures)\nConsider implementing these additional security practices:\n-   Use [deployment environments](https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment) to add approval requirements\n-   Enable [tag protection rules](https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/managing-repository-settings/configuring-tag-protection-rules) to control who can create release tags\n-   Regularly audit your trusted publisher configurations\n-   Remove any unused publish tokens from your npm account\n## [Troubleshooting](#troubleshooting)\nIf you encounter an \"Unable to authenticate\" error when publishing, first verify that the workflow filename matches exactly what you configured on [npmjs.com](https://npmjs.com), including the `.yml` extension. All fields are case-sensitive and must be exact. Also ensure you're using GitHub-hosted runners or GitLab.com shared runners, as self-hosted runners are not currently supported. For GitHub Actions specifically, check that the `id-token: write` permission is set in your workflow.\n**Note:** npm does not verify your trusted publisher configuration when you save it. Double-check that your repository, workflow filename, and other details are correct, as errors will only appear when you attempt to publish.\nIf your package has private dependencies and `npm install` or `npm ci` is failing with authentication errors, remember that trusted publishing only applies to the `npm publish` command. You'll still need to provide a read-only token for installing private packages as shown in the examples above.\nFor packages in private repositories, provenance will not be generated even though you're using trusted publishing. This is a [known limitation](https://github.blog/changelog/2023-07-25-publishing-with-npm-provenance-from-private-source-repositories-is-no-longer-supported/) that applies regardless of whether your package itself is public or private.\nSome GitHub Actions workflows use `workflow_call` to invoke other workflows that run `npm publish`, or use `workflow_dispatch` for manual publishing. When this happens, validation checks the calling workflow's name instead of the workflow that actually contains the publish command, which can cause configuration mismatches.\n## [Limitations and future improvements](#limitations-and-future-improvements)\nTrusted publishing currently supports only cloud-hosted runners. Support for self-hosted runners is intended for a future release. Each package can only have one trusted publisher configured at a time, though you can update this configuration as needed.\nOIDC authentication is currently limited to the publish operation. Other npm commands such as `install`, `view`, or `access` still require traditional authentication methods. The `npm whoami` command will not reflect OIDC authentication status since the authentication occurs only during the publish operation.\nWe intend to expand trusted publishing support to additional CI/CD providers and enhance the feature based on community feedback.\n## [Learn more](#learn-more)\n-   [About npm provenance](https://docs.npmjs.com/generating-provenance-statements)\n-   [OpenSSF Trusted Publishers specification](https://repos.openssf.org/trusted-publishers-for-all-package-repositories)\n-   [GitHub Actions OIDC documentation](https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect)\n-   [GitLab CI/CD OIDC documentation](https://docs.gitlab.com/ee/ci/cloud_services/)\n-   [API documentation for exchanging OIDC ID token for npm registry token](https://api-docs.npmjs.com/#tag/registry.npmjs.org/operation/exchangeOidcToken)\n[Edit this page on GitHub](https://github.com/npm/documentation/edit/main/content/packages-and-modules/securing-your-code/trusted-publishers.mdx)\n6 contributors[![simonkoeck](https://github.com/simonkoeck.png?size=40)](https://github.com/simonkoeck)simonkoeck[![remcohaszing](https://github.com/remcohaszing.png?size=40)](https://github.com/remcohaszing)remcohaszing[![reggi](https://github.com/reggi.png?size=40)](https://github.com/reggi)reggi[![leobalter](https://github.com/leobalter.png?size=40)](https://github.com/leobalter)leobalter[![jrvidal](https://github.com/jrvidal.png?size=40)](https://github.com/jrvidal)jrvidal[![generalmimon](https://github.com/generalmimon.png?size=40)](https://github.com/generalmimon)generalmimon\nLast edited by [simonkoeck](https://github.com/simonkoeck) on [December 9, 2025](https://github.com/npm/documentation/commit/bd430eda8aa7e5334ae054a640374727e10aeeb0)\n## Table of contents\n-   [How trusted publishing works](#how-trusted-publishing-works)\n-   [Supported CI/CD providers](#supported-cicd-providers)\n-   Configuring trusted publishing\n    -   Step 1: Add a trusted publisher on npmjs.com\n        -   [For GitHub Actions](#for-github-actions)\n        -   [For GitLab CI/CD](#for-gitlab-cicd)\n    -   Step 2: Configure your CI/CD workflow\n        -   [GitHub Actions configuration](#github-actions-configuration)\n        -   [GitLab CI/CD configuration](#gitlab-cicd-configuration)\n    -   [Managing trusted publisher configurations](#managing-trusted-publisher-configurations)\n-   Recommended: Restrict token access when using trusted publishers\n    -   [How to configure maximum security](#how-to-configure-maximum-security)\n    -   [Why this matters](#why-this-matters)\n    -   [Migration tip](#migration-tip)\n-   Automatic provenance generation\n    -   [Disabling provenance generation](#disabling-provenance-generation)\n-   Security best practices\n    -   [Prefer trusted publishing over tokens](#prefer-trusted-publishing-over-tokens)\n    -   [Handling private dependencies](#handling-private-dependencies)\n    -   [Additional security measures](#additional-security-measures)\n-   [Troubleshooting](#troubleshooting)\n-   [Limitations and future improvements](#limitations-and-future-improvements)\n-   [Learn more](#learn-more)",
  "timestamp": 1765568672183,
  "title": "Trusted publishing for npm packages | npm Docs"
}